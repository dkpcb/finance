## 概要

このアプリケーションは、投資信託の取引履歴と基準価額を管理し、評価するために開発されました。主要な機能としては、取引と価格データのインポート、データ処理、およびユーザー固有の取引数、資産評価、損益計算を取得するためのAPIを提供します。

## 機能

### 機能1: 取引履歴と基準価額データのインポート
- **説明**: アプリケーションは `trade_history.csv` と `reference_prices.csv` の2つのCSVファイルを読み込み、その内容をMySQL 8.0データベースに保存します。
- **ファイル構成**:
  - `trade_history.csv`: `user_id`、`fund_id`、`quantity`、`trade_date` の列を含む取引履歴を記録。
  - `reference_prices.csv`: `fund_id`、`reference_price_date`、`reference_price` の列を含む基準価額履歴を記録。

### 機能2: Dockerを使用したアプリケーションのコンテナ化
- **説明**: アプリケーションはDockerを使用してコンテナ化され、一貫した環境で実行されます。
- **コマンド**:
  - `make dev/run/import`: データベースにデータをインポートします。
  - `make dev/run/server`: アプリケーションサーバーを起動し、`localhost:8080` でアクセス可能にします。

### 機能3: ユーザーの取引回数を取得するAPI
- **説明**: 特定の `user_id` に対する取引回数を取得するAPIを提供します。
- **APIエンドポイント**: `/{user_id}/trades`
- **レスポンス**:
  ```json
  { 
    "count": 197 
  }
  ```

### 機能4: 現在の資産評価額と評価損益を取得するAPI
- **説明**: 特定の `user_id` に対する現在の資産評価額と評価損益を取得するAPIを提供します。
- **APIエンドポイント**: `/{user_id}/assets`
- **レスポンス**:
  ```json
  { 
    "date": "2024-06-01", 
    "current_value": 17661, 
    "current_pl": 62 
  }
  ```

### 機能5: 特定の日付における資産評価額と評価損益を取得するAPI
- **説明**: 特定の `user_id` と `date` に対する資産評価額と評価損益を取得するAPIを提供します。
- **APIエンドポイント**: `/{user_id}/assets?date={date}`
- **レスポンス**:
  ```json
  { 
    "date": "2024-04-01", 
    "current_value": 13822, 
    "current_pl": 44 
  }
  ```

### 機能6: 年ごとの資産評価額と評価損益を取得するAPI
- **説明**: 特定の `user_id` における現在時点の資産評価額と評価損益を、購入年ごとに集計して返すAPIを提供します。
- **APIエンドポイント**: `/{user_id}/assets/byYear`
- **レスポンス**:
  ```json
  { 
    "date": "2024-06-01", 
    "assets": [ 
      { 
        "year": 2024, 
        "current_value": 10945, 
        "current_pl": 38 
      }, 
      { 
        "year": 2023, 
        "current_value": 6715, 
        "current_pl": 23 
      }
    ] 
  }
  ```

## 実装の詳細

- **言語**: Go
- **データベース**: MySQL 8.0
- **コンテナ**: Docker
- **パフォーマンス**: アプリケーションは大規模なデータセットにも対応できるように設計されており、データ量の増加に伴う実行時間の増加を最小限に抑えます。